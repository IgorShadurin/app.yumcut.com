# Backend environment example (copy to `.env` before starting the API service)

# Primary database connection (required)
DATABASE_URL="mysql://user:password@localhost:3306/yumcut"

# Publishing scheduler toggle
# 0 - disabled for everyone (except allowlisted user IDs below)
# 1 - enabled globally
ENABLE_PUBLISH_SCHEDULER=0
# Comma-separated list of user IDs that see the scheduler even if the global flag is 0
PUBLISH_SCHEDULER_BETA_USERS=""

# RSA-4096 key pair used for upload grants. Generate with:
#   npm run upload-keys:generate
# Private key (either paste PEM contents or path like keys/upload_private.pem) – configure on the main app so it can sign grants.
UPLOAD_SIGNING_PRIVATE_KEY=""
# Public key (PEM contents or path) – configure on both the main app and the storage worker to verify signatures.
UPLOAD_SIGNING_PUBLIC_KEY=""

# Public base URL of the storage deployment.
# The browser posts uploads to `${NEXT_PUBLIC_STORAGE_BASE_URL}/api/storage/user-images`.
NEXT_PUBLIC_STORAGE_BASE_URL="https://storage.example.com"
# Base URL of the storage service used by automated tests; override when running tests against local storage.
TEST_STORAGE_BASE_URL="http://localhost:3333"

# Feature flag: enable the "Audio tone prompt" controls in the UI (0 = hide, 1 = show)
NEXT_PUBLIC_ENABLE_AUDIO_TONE_PROMPT=0

# NextAuth configuration (required for the app to issue sessions)
NEXTAUTH_URL="http://localhost:3000"

# Telegram bot integration (optional)
TELEGRAM_BOT_TOKEN=""
TELEGRAM_BOT_USERNAME=""
TELEGRAM_WEBHOOK_SECRET=""
NEXTAUTH_SECRET="replace-with-random-string"
# Allow builds/tests to proceed without Google/Apple providers (never set in real prod)
# ALLOW_NO_OAUTH=1

# YouTube OAuth credentials (server-side only; never expose to client bundles)
YOUTUBE_CLIENT_ID=""
YOUTUBE_CLIENT_SECRET=""
# Secret used to encrypt publish-channel refresh/access tokens (32+ chars random)
PUBLISH_CHANNEL_TOKEN_SECRET=""

# Shared API secrets
SERVICE_API_PASSWORD="change-me"
DAEMON_API_PASSWORD="change-me-too"

# Base URL (scheme + host) exposed by the storage service for /api/media access
STORAGE_PUBLIC_URL="https://storage.example.com"

# Image regeneration (Runware)
RUNWARE_IMAGE_EDITOR_API_KEY=""

# Optional OAuth provider secrets (uncomment/configure if Google sign-in is enabled)
# GOOGLE_CLIENT_ID=""
# GOOGLE_CLIENT_SECRET=""
# GOOGLE_IOS_CLIENT_ID=""

# Sign in with Apple (web + iOS)
# APPLE_WEB_CLIENT_ID="com.example.web"
# APPLE_IOS_CLIENT_ID="com.example.app"
# APPLE_TEAM_ID=""
# APPLE_KEY_ID=""
# APPLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"
# The private key is issued in Apple Developer → Certificates, Identifiers & Profiles → Keys → “+” → Sign In with Apple (URL: https://developer.apple.com/account/resources/authkeys/add).
# macOS helper (single line with literal \n): cat /Users/test/Documents/Apple-Keys/YumCutWeb/AuthKey_ZBD3XN4B2Y.p8 | awk 'BEGIN{ORS=""} {gsub(/\r/,""); printf "%s\\n", $0}'
# Generate the App-Specific Shared Secret in App Store Connect:
#   Apps -> <Your App> -> General -> App Information -> App-Specific Shared Secret (Manage -> Generate)
# Use the 32-character hex value here so the server can validate subscriptions.
# APPLE_IAP_SHARED_SECRET=""
# Numeric Apple ID of the app in App Store Connect (required for production notification verification).
# APPLE_APP_APPLE_ID=1234567890
# If your backend talks to App Store sandbox, leave this as "sandbox". Set to "production" when verifying receipts for App Store builds.
# APPLE_IAP_ENVIRONMENT="sandbox"
# Toggle verbose logging of Apple subscription events (set to false/0/no to silence).
# APPLE_SUBSCRIPTION_LOGS_ENABLED=true
# Forward raw App Store server notifications to Telegram (disabled by default).
# APPLE_SERVER_NOTIFICATION_TELEGRAM_ENABLED=false

# Secrets for mobile session tokens (required for mobile app integration)
# MOBILE_JWT_SECRET="create-a-long-random-string"
# MOBILE_ACCESS_TOKEN_TTL_MINUTES=30
# MOBILE_REFRESH_TOKEN_TTL_DAYS=180

# Reviewer login (optional helper for App Review access)
# REVIEW_LOGIN_EMAIL="dappykit@gmail.com"
# REVIEW_LOGIN_PASSWORD="HelloDemo738***"
# Allow builds/tests to skip reviewer auth requirement (never enable in production)
# ALLOW_NO_REVIEW_AUTH=1
